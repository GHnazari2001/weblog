{% extends "base.html" %}
{% load static %}

{% block content %}
<section class="breadcrumbs">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center">
      <h2>پروفایل کاربری</h2>
      <ol>
        <li><a href="{% url 'home' %}">خانه</a></li>
        <li>پروفایل</li>
      </ol>
    </div>
  </div>
</section>

<section id="profile-details" class="profile-details">
  <div class="container" data-aos="fade-up">

    <div class="row justify-content-center">
      <div class="col-lg-8">
        <article class="entry p-4" style="box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);">

          <div class="profile-header d-flex flex-column align-items-center text-center mb-4">
            {% if user_profile.photo %}
              <img src="{{ user_profile.photo.url }}" alt="عکس پروفایل {{ user_profile.username }}" class="rounded-circle img-thumbnail mb-3" style="width: 150px; height: 150px; object-fit: cover;">
            {% else %}
              <div class="profile-avatar-placeholder rounded-circle img-thumbnail d-flex align-items-center justify-content-center mb-3" style="width: 150px; height: 150px; background-color: #e9ecef;">
                <i class="bi bi-person-fill" style="font-size: 80px; color: #495057;"></i>
              </div>
            {% endif %}

            <h2 class="h4 mb-1">{{ user_profile.get_full_name|default:user_profile.username }}</h2>

            <div class="social-links-profile mt-2">
              {% if user_profile.telegram %}
                <a href="https://t.me/{{ user_profile.telegram}}" target="_blank" class="mx-1"><i class="bi bi-telegram" style="font-size: 1.5rem;"></i></a>
              {% endif %}
              {% if user_profile.instagram %}
                <a href="https://instagram.com/{{ user_profile.instagram}}" target="_blank" class="mx-1"><i class="bi bi-instagram" style="font-size: 1.5rem;"></i></a>
              {% endif %}
               {% if user_profile.linkedin %}
                <a href="https://linkedin.com/in/{{ user_profile.linkedin }}" target="_blank" class="mx-1"><i class="bi bi-linkedin" style="font-size: 1.5rem;"></i></a>
              {% endif %}
            </div>
          </div>

          <hr>

          <div class="profile-fields mt-4">
            <div class="mb-3">
              <label class="form-label fw-bold">نام:</label>
              <div class="profile-field-value">{{ user_profile.first_name|default:"-" }}</div>
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold">نام خانوادگی:</label>
              <div class="profile-field-value">{{ user_profile.last_name|default:"-" }}</div>
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold">نام کاربری:</label>
              <div class="profile-field-value">{{ user_profile.username }}</div>
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold">ایمیل:</label>
              <div class="profile-field-value">{{ user_profile.email }}</div>
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold">سن:</label>
              <div class="profile-field-value">{{ user_profile.age|default:"-" }}</div>
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold">درباره من:</label>
              <div class="profile-field-value" style="min-height: 80px;">{{ user_profile.about|linebreaksbr|default:"-" }}</div>
            </div>
          </div>

          <div class="profile-actions mt-4 d-grid gap-2 d-md-flex justify-content-center">
            <a href="{% url 'profile_edit' %}" class="btn btn-primary"><i class="bi bi-pencil-square"></i> ویرایش مشخصات</a>
            <a href="{% url 'password_change' %}" class="btn btn-outline-secondary"><i class="bi bi-key"></i> تغییر رمز</a>
          </div>

        </article>
      </div>
    </div>
  </div>
</section>

<style>
  .profile-field-value {
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;
    word-wrap: break-word; /* برای جلوگیری از به هم ریختگی در ایمیل‌های طولانی */
    min-height: calc(1.5em + 1rem + 2px);
  }
</style>
{% endblock content %}